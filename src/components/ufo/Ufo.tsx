import { useState, useEffect } from 'react'
import './Ufo.scss'

const ACTIVE_LIGHT_COLOR = "#00EC83";
const INACTIVE_LIGHT_COLOR = "#ACF4D4";
// const BODY_COLOUR = "#41CAC3";
// const RIM_COLOUR = "#93429F";

interface UfoProps {
    width: number | string, 
    height: number | string,
    onClick: () => void,
}

export const Ufo = ({ width, height, onClick }: UfoProps) => {
  return (
    <svg width={width} height={height} viewBox="0 0 959 424" fill="none" xmlns="http://www.w3.org/2000/svg" style={{ overflow: "visible" }}>
        <g className="ufo" onClick={onClick}>
            <Window />
            <Body />
            <Lights />
        </g>
    </svg>
  )
}

const Window = () => {
    return (
        <g className="window">
            <ellipse cx="479.5" cy="211.5" rx="211.06" ry="211.5" fill="#D9D9D9" fill-opacity="0.4"/>
        </g>
    );
}

const Body = () => {
    return (
        <g className="body">
            <path d="M251.476 180.605C166.154 196.105 57.8048 240.106 8.98132 280.605C90.3117 347.104 843.74 360.604 950.019 280.605C898.216 237.777 851.144 218.967 707.525 180.605C694.218 178.032 675.591 188.604 667.608 192.605C606.879 223.033 347.775 233.604 291.891 192.605C280.54 184.276 265.945 177.976 251.476 180.605Z" fill="#368C76"/>
            <path d="M8.98132 280.605C90.3117 347.104 843.74 360.604 950.019 280.605C774.884 478.104 159.667 463.104 8.98132 280.605Z" fill="#404241"/>
            <path d="M955.264 294.558C835.685 370.754 100.39 358.111 3.32584 294.403C0.963351 292.852 0 290.38 0 287.586C0 279.749 9.64482 274.341 16.9837 277.399C150.581 333.08 796.492 343.248 942.361 277.409C949.672 274.11 959 279.298 959 287.207C959 290.225 957.839 292.917 955.264 294.558Z" fill="#161616"/>
        </g>
    );
}

const Lights = () => {
    const [activeLight, setActiveLight] = useState<number>(0);

    useEffect(() => {
        setInterval(() => setActiveLight(prevActiveLight => prevActiveLight === 4 ? 0 : prevActiveLight + 1), 100);
    }, []); 

    const getLightColor = (light: number) => activeLight === light ? ACTIVE_LIGHT_COLOR : INACTIVE_LIGHT_COLOR;

    return (
        <g className="lights">
            <path d="M183.623 276.5C199.878 276.5 213.056 262.428 213.056 245.07C213.056 227.711 208.355 227 192.099 227C188.997 227 186.079 227.424 183.388 228.231C185.22 227.753 187.135 227.5 189.106 227.5C202.333 227.5 206.569 230.917 206.569 245C206.569 259.083 195.846 270.5 182.619 270.5C169.392 270.5 165.156 267.083 165.156 253C165.156 250.213 165.576 247.53 166.352 245.02C165.246 248.331 164.657 252.015 164.657 256C164.657 273.358 167.368 276.5 183.623 276.5Z" fill="#161616"/>
            <path d="M346.278 265.702C346.278 281.883 333.706 295 318.199 295C302.691 295 295.384 286.479 295.384 270.298C295.384 254.117 307.956 241 323.463 241C338.971 241 346.278 249.521 346.278 265.702Z" fill="#161616"/>
            <path d="M506.943 275.527C506.943 291.835 494.433 305.055 479.001 305.055C463.569 305.055 451.059 291.835 451.059 275.527C451.059 259.22 463.569 246 479.001 246C494.433 246 506.943 259.22 506.943 275.527Z" fill="#161616"/>
            <path d="M612.722 265.702C612.722 281.883 625.294 295 640.802 295C656.309 295 663.616 286.479 663.616 270.298C663.616 254.117 651.044 241 635.537 241C620.029 241 612.722 249.521 612.722 265.702Z" fill="#161616"/>
            <path d="M774.878 276.5C758.623 276.5 745.445 262.428 745.445 245.07C745.445 227.711 750.146 227 766.402 227C769.504 227 772.422 227.424 775.113 228.231C773.281 227.753 771.366 227.5 769.395 227.5C756.168 227.5 751.932 230.917 751.932 245C751.932 259.083 762.655 270.5 775.882 270.5C789.109 270.5 793.345 267.083 793.345 253C793.345 250.213 792.925 247.53 792.149 245.02C793.255 248.331 793.844 252.015 793.844 256C793.844 273.358 791.133 276.5 774.878 276.5Z" fill="#161616"/>
            
            <path fill-rule="evenodd" clip-rule="evenodd" d="M183.388 228.231C185.22 227.753 187.135 227.5 189.106 227.5C202.333 227.5 206.569 230.917 206.569 245C206.569 259.083 195.846 270.5 182.619 270.5C169.392 270.5 165.156 267.083 165.156 253C165.156 250.213 165.576 247.53 166.352 245.02C169.142 236.662 175.218 230.682 183.388 228.231Z" fill={getLightColor(0)}/>
            <path d="M340.789 264.5C340.789 278.583 330.067 290 316.839 290C303.612 290 296.382 282.083 296.382 268C296.382 253.917 307.105 242.5 320.332 242.5C333.559 242.5 340.789 250.417 340.789 264.5Z" fill={getLightColor(1)}/>
            <path d="M502.951 273.5C502.951 287.583 492.228 299 479.001 299C465.774 299 455.051 287.583 455.051 273.5C455.051 259.417 465.774 248 479.001 248C492.228 248 502.951 259.417 502.951 273.5Z" fill={getLightColor(2)}/>
            <path d="M618.211 264.5C618.211 278.583 628.933 290 642.161 290C655.388 290 662.618 282.083 662.618 268C662.618 253.917 651.895 242.5 638.668 242.5C625.441 242.5 618.211 250.417 618.211 264.5Z" fill={getLightColor(3)}/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M775.113 228.231C773.281 227.753 771.366 227.5 769.395 227.5C756.168 227.5 751.932 230.917 751.932 245C751.932 259.083 762.655 270.5 775.882 270.5C789.109 270.5 793.345 267.083 793.345 253C793.345 250.213 792.925 247.53 792.149 245.02C789.359 236.662 783.283 230.682 775.113 228.231Z" fill={getLightColor(4)}/>
        </g>
    );
}


